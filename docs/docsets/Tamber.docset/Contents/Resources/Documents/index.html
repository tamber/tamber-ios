<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Tamber  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="Tamber  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          Tamber Docs
        </a>
        
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/tamber/tamber-ios">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">Tamber Reference</a>
      <img class="carat" src="img/carat.png" />
      Tamber  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBClient.html">TMBClient</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBDiscoverBasicParams.html">TMBDiscoverBasicParams</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBDiscoverParams.html">TMBDiscoverParams</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBDiscoverResponse.html">TMBDiscoverResponse</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBEvent.html">TMBEvent</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBEventParams.html">TMBEventParams</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBEventResponse.html">TMBEventResponse</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBItem.html">TMBItem</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBUser.html">TMBUser</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBUserParams.html">TMBUserParams</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TMBUserSearchResponse.html">TMBUserSearchResponse</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/Tamber.html">Tamber</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TMBObjectDecodable.html">TMBObjectDecodable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TMBObjectEncodable.html">TMBObjectEncodable</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <h1 id='tamber-ios-sdk' class='heading'>Tamber iOS SDK</h1>

<p>Recommendation engines for developers, easy as π. Build blazing fast, head-scratchingly accurate hosted recommendation engines in minutes.</p>

<p>The Tamber iOS SDK makes it easy to track events (user-item interactions) and get recommendations for your users inside your iOS app. </p>

<p><a href="https://tamber.com/">Get a free api key</a> to get started.</p>
<h2 id='requirements' class='heading'>Requirements</h2>

<p>Our SDK is compatible with iOS 8.0 and above. It requires Xcode 8.0+ to build the source.</p>
<h2 id='documentation' class='heading'>Documentation</h2>

<p>This ReadMe covers the basics of using the Tamber iOS SDK. Check out the <a href="http://tamber.github.io/tamber-ios/docs/index.html">sdk documentation</a> for a comprehensive look at the classes and methods, and the full <a href="https://tamber.com/docs/api">API Reference</a> for Tamber documentation.</p>
<h2 id='installation' class='heading'>Installation</h2>

<p>Install Tamber with <a href="https://guides.cocoapods.org/using/getting-started.html">CocoaPods</a>. If you do not yet have a Podfile for your project, <code>$ cd</code> into your project directory and run <code>$ pod init</code>.</p>

<p>Add this line to your Podfile:</p>
<pre class="highlight plaintext"><code>pod 'Tamber'
</code></pre>

<p>Then, run the following command:</p>
<pre class="highlight plaintext"><code>$ pod install
</code></pre>
<h2 id='usage' class='heading'>Usage</h2>

<p>If you are just getting started, check out the <a href="https://tamber.com/docs/start/">Quick Start</a> guide for instructions on how to get setup.</p>

<p>To begin tracking events, set your publishable project key.</p>
<pre class="highlight objective_c"><code><span class="cp">#import "AppDelegate.h"
</span><span class="k">@import</span> <span class="n">Tamber</span><span class="p">;</span>

<span class="k">@implementation</span> <span class="nc">AppDelegate</span>
<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">application</span><span class="p">:(</span><span class="n">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions</span><span class="p">:(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">Tamber</span> <span class="nf">setPublishableProjectKey</span><span class="p">:</span><span class="s">@"your_project_key"</span><span class="p">];</span>
    <span class="c1">// do any other necessary launch configuration
</span>    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>
</code></pre>
<h3 id='set-user' class='heading'>Set User</h3>

<p>Set the User wherever you load your user&rsquo;s unique ID from your backend, or wherever you load user ids from.</p>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">Tamber</span> <span class="nf">setUser</span><span class="p">:</span><span class="s">@"user_id"</span><span class="p">];</span>
</code></pre>
<h3 id='track-events' class='heading'>Track Events</h3>

<p>Stream events to your Tamber project as the user interacts with items in your app.</p>
<pre class="highlight objective_c"><code><span class="n">TMBItem</span> <span class="o">*</span><span class="n">item</span> <span class="o">=</span> <span class="p">[</span><span class="n">TMBItem</span> <span class="nf">itemWithId</span><span class="p">:</span><span class="s">@"item_id"</span>
    <span class="nf">properties</span><span class="p">:@{</span>
        <span class="s">@"type"</span><span class="o">:</span><span class="s">@"book"</span><span class="p">,</span>
        <span class="s">@"title"</span><span class="o">:</span><span class="s">@"The Moon is a Harsh Mistress"</span><span class="p">,</span>
        <span class="s">@"img_url"</span><span class="o">:</span><span class="s">@"https://img.domain.com/book/The_Moon_is_a_Harsh Mistress.jpg"</span><span class="p">,</span> 
        <span class="s">@"stock"</span><span class="o">:</span><span class="p">[</span><span class="n">NSNumber</span> <span class="nf">numberWithInteger</span><span class="p">:</span><span class="mi">34</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">tags</span><span class="o">:</span><span class="p">@[</span><span class="s">@"sci-fi"</span><span class="p">,</span> <span class="s">@"bestseller"</span><span class="p">]</span>
<span class="p">];</span>

<span class="n">TMBEventParams</span> <span class="o">*</span><span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">TMBEventParams</span> <span class="nf">eventWithItem</span><span class="p">:</span><span class="n">item</span> <span class="nf">behavior</span><span class="p">:</span><span class="s">@"like"</span> <span class="n">context</span><span class="o">:</span><span class="p">@{</span><span class="s">@"page"</span><span class="o">:</span> <span class="s">@"homepage"</span><span class="p">,</span> <span class="s">@"section"</span><span class="o">:</span> <span class="s">@"featured"</span><span class="p">}];</span>
<span class="p">[[</span><span class="n">Tamber</span> <span class="nf">client</span><span class="p">]</span> <span class="nf">trackEvent</span><span class="p">:</span><span class="n">params</span> <span class="nf">responseCompletion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">TMBEventResponse</span> <span class="o">*</span><span class="n">object</span><span class="p">,</span> <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">error</span><span class="p">){</span>
        <span class="c1">// Handle error
</span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">object</span><span class="p">.</span><span class="n">events</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1">// Event tracked
</span>        <span class="n">object</span><span class="p">.</span><span class="n">recs</span> <span class="c1">// Returns updated recommendations if params.getRecs is set - [params setGetRecs:&lt;TMBDiscoverParams&gt;]
</span>    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>

<p>You may also set the item to just the unique ID of the item, but this will limit the capabilities of your engine.</p>
<pre class="highlight objective_c"><code><span class="n">TMBEventParams</span> <span class="o">*</span><span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">TMBEventParams</span> <span class="nf">eventWithItem</span><span class="p">:</span><span class="s">@"item_id"</span> <span class="nf">behavior</span><span class="p">:</span><span class="s">@"like"</span><span class="p">];</span>
</code></pre>
<h3 id='get-recommendations' class='heading'>Get Recommendations</h3>

<p>Once you have seeded some events and created your engine, you can start pulling user recommendations into your app.</p>

<p>To get recommendations for the user to show on a homepage, or in any recommended section:</p>
<pre class="highlight objective_c"><code><span class="n">TMBDiscoverParams</span> <span class="o">*</span><span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">TMBDiscoverParams</span> <span class="nf">discoverRecommended</span><span class="p">:[</span><span class="n">NSNumber</span> <span class="nf">numberWithInt</span><span class="p">:</span><span class="mi">8</span><span class="p">]];</span>
<span class="p">[[</span><span class="n">Tamber</span> <span class="nf">client</span><span class="p">]</span> <span class="nf">discoverNext</span><span class="p">:</span><span class="n">params</span> <span class="nf">responseCompletion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">TMBDiscoverResponse</span> <span class="o">*</span><span class="n">object</span><span class="p">,</span> <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">error</span><span class="p">){</span>
        <span class="c1">// Handle error
</span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="n">TMBDiscovery</span> <span class="o">*</span><span class="n">discovery</span> <span class="k">in</span> <span class="n">object</span><span class="p">.</span><span class="n">discoveries</span><span class="p">){</span>
            <span class="n">discovery</span><span class="p">.</span><span class="n">item</span> <span class="c1">// Recommended item id
</span>            <span class="n">discovery</span><span class="p">.</span><span class="n">score</span> <span class="c1">// Recommendation score (relative to other results, not a predicted rating)
</span>        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>

<p>To get similar items for an &lsquo;up next&rsquo; section on an item page:</p>
<pre class="highlight objective_c"><code><span class="n">TMBDiscoverParams</span> <span class="o">*</span><span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">TMBDiscoverParams</span> <span class="nf">discoverNext</span><span class="p">:</span><span class="s">@"item_id"</span> <span class="nf">number</span><span class="p">:[</span><span class="n">NSNumber</span> <span class="nf">numberWithInt</span><span class="p">:</span><span class="mi">10</span><span class="p">]];</span>
<span class="p">[[</span><span class="n">Tamber</span> <span class="nf">client</span><span class="p">]</span> <span class="nf">discoverNext</span><span class="p">:</span><span class="n">params</span> <span class="nf">responseCompletion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">TMBDiscoverResponse</span> <span class="o">*</span><span class="n">object</span><span class="p">,</span> <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">error</span><span class="p">){</span>
        <span class="c1">// Handle error
</span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="n">TMBDiscovery</span> <span class="o">*</span><span class="n">discovery</span> <span class="k">in</span> <span class="n">object</span><span class="p">.</span><span class="n">discoveries</span><span class="p">){</span>
            <span class="n">discovery</span><span class="p">.</span><span class="n">item</span> <span class="c1">// Recommended item id
</span>            <span class="n">discovery</span><span class="p">.</span><span class="n">score</span> <span class="c1">// Recommendation score (relative to other results, not a predicted rating)
</span>        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>

<p>If you are setting <a href="https://tamber.com/docs/guides/filtering.html">properties for your items</a>, you can include these properties in recommendation responses to simplify data handling. For example, you might have <code>title</code>, <code>img</code>, and <code>price</code> properties that you can use to display items to users without needing to make an additional request for each recommendation.</p>
<pre class="highlight objective_c"><code><span class="n">TMBDiscoverParams</span> <span class="o">*</span><span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">TMBDiscoverParams</span> <span class="nf">alloc</span><span class="p">]</span> <span class="n">discoverNext</span><span class="o">:</span><span class="p">[</span><span class="n">NSNumber</span> <span class="nf">numberWithInt</span><span class="p">:</span><span class="mi">50</span><span class="p">]</span> <span class="n">getProperties</span><span class="o">:</span><span class="nb">true</span><span class="p">];</span>
<span class="p">[[</span><span class="n">Tamber</span> <span class="nf">client</span><span class="p">]</span> <span class="nf">discoverNext</span><span class="p">:</span><span class="n">params</span> <span class="nf">responseCompletion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">TMBDiscoverResponse</span> <span class="o">*</span><span class="n">object</span><span class="p">,</span> <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">error</span><span class="p">){</span>
        <span class="c1">// Handle error
</span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="n">TMBDiscovery</span> <span class="o">*</span><span class="n">discovery</span> <span class="k">in</span> <span class="n">object</span><span class="p">.</span><span class="n">discoveries</span><span class="p">){</span>
            <span class="n">discovery</span><span class="p">.</span><span class="n">item</span> <span class="c1">// Recommended item id
</span>            <span class="n">discovery</span><span class="p">.</span><span class="n">score</span> <span class="c1">// Recommendation score (relative to other results, not a predicted rating)
</span>            <span class="n">discovery</span><span class="p">.</span><span class="n">properties</span> <span class="c1">// Dictionary of item properties
</span>        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>
<h3 id='anonymous-signed-out-users' class='heading'>Anonymous / Signed-Out Users</h3>

<p>If your app allows users to interact with content before creating an account, or when they are logged out, but you have some unique identifier (like the device id) you may set the user to this id and track events as normal. Then, when the user creates an account or logs in, you can <code>merge</code> the anonymous user into the logged-in user.</p>
<pre class="highlight objective_c"><code><span class="c1">// At app launch / wherever appropriate in your code 
</span><span class="p">[</span><span class="n">Tamber</span> <span class="nf">setUser</span><span class="p">:</span><span class="s">@"anonymous-device-id"</span><span class="p">];</span>

<span class="c1">// On signup/login:
</span><span class="n">NSString</span> <span class="o">*</span><span class="n">toUser</span> <span class="o">=</span> <span class="s">@"user-id"</span><span class="p">;</span> <span class="c1">// The id of the user to which you want to merge.
</span><span class="p">[[</span><span class="n">Tamber</span> <span class="nf">client</span><span class="p">]</span> <span class="nf">mergeToUser</span><span class="p">:</span><span class="n">toUser</span> <span class="nf">responseCompletion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">TMBUser</span> <span class="o">*</span><span class="n">object</span><span class="p">,</span> <span class="n">NSHTTPURLResponse</span> <span class="o">*</span><span class="n">response</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">error</span><span class="p">){</span>
        <span class="c1">// Handle error. Note that mergeToUser internally sets the default user to the `toUser`.
</span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
       <span class="n">object</span><span class="p">.</span><span class="n">events</span> <span class="c1">// Array of merged user events (`TMBEvent` objects)
</span>       <span class="n">object</span><span class="p">.</span><span class="n">metadata</span> <span class="c1">// Dictionary of the merged user metadata. Note that field-value conflicts default to the `toUser`.
</span>    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>
<h3 id='testing-recommendations' class='heading'>Testing Recommendations</h3>

<p>We recommend creating test users during testing. To do this, simply call the <code>makeTestUser</code> method.</p>
<pre class="highlight objective_c"><code><span class="cp">#define DEV_MODE true
</span>
<span class="p">[</span><span class="n">Tamber</span> <span class="nf">setUser</span><span class="p">:</span><span class="s">@"testing-user-id"</span><span class="p">];</span>
<span class="k">if</span><span class="p">(</span><span class="n">DEV_MODE</span><span class="p">){</span>
    <span class="p">[</span><span class="n">Tamber</span> <span class="nf">makeTestUser</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2019 <a class="link" href="https://tamber.com" target="_blank" rel="external">Tamber</a>. All rights reserved. (Last updated: 2019-04-04)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.8.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
